# User orchestration service

###### Сервис User orchestration отвечает за связь с всеми микросервисами по кафке.


## Используемые технологии:

###### Java 17
###### Spring Boot Starter Data JPA
###### Spring Boot Starter Security
###### Spring Boot Starter Web
###### PostgreSQL
###### Flyway Core
###### Spring Kafka
###### ModelMapper
###### Java JWT

## Функциональность

###### Сервис User Orchestration Service взаимодействует с всеми микросервисами по кафке и передает данные по Rest в Frontend.

### Аутентификация

###### POST /auth/login - Пройти аутентификацию и авторизацию.

### Клиенты

###### GET /api/v1/clients - Получит всех клиентов.
###### GET /api/v1/clients/{id} - Получить клиента по идентификатору.
###### POST /api/v1/clients - Создать нового клиента.
###### POST /api/v1/clients/{id} - Добавить банк для клиента
###### PATCH /api/v1/clients/{id} - Обновить существующего клиента.
###### DELETE /api/v1/clients/{id} - Удалить клиента. (Может только пользователь с ролью Админ)
### Банки

###### GET  /api/v1/banks - Получает все банки.
###### GET  /api/v1/banks/{id} - Получить банк по идентификатору.
###### PATCH  /api/v1/banks/{id} - Обновить существующий банк.
###### DELETE  /api/v1/banks/{id} - Удалить банк.
### Заказы

###### GET  /api/v1/orders - Получает все заказы.
###### GET /api/v1/orders/{id} - Получает заказ по идентификатору.
###### POST  /api/v1/orders - Создает новый заказ.
###### PATCH  /api/v1/orders/{id} - Обновить клиента в существующем заказе.
###### PATCH  /api/v1/orders/{id}/update-comment - Обновить комментарий в существующем заказе.
###### POST  /api/v1/orders/{id}/add-product - Добавить товар в существующий заказ
###### PATCH  /api/v1/orders/{id}/update-product-quantity - Изменить количество товара в заказе
###### DELETE  /api/v1/orders/{id}/delete-from-order - Удалить выборочно товар из заказа.
###### DELETE  /api/v1/orders/{id}/delete-products - Удалить весь товар с заказа.
###### DELETE  /api/v1/orders/{id} - Удаляет заказ.
### Продукты

###### GET  /api/v1/products/get-products-by-order?order-id= - Получить товар по id заказа.
###### GET  /api/v1/products - Получает все товары.
###### GET  /api/v1/products/{id} - Получает продукт по идентификатору.
###### POST  /api/v1/products - Создает новый продукт. (Может только пользователь с ролью Админ)
###### PATCH  /api/v1/products/{id} - Обновляет существующий продукт. (Может только пользователь с ролью Админ)
###### DELETE  /api/v1/products/{id} - Удаляет продукт. (Может только пользователь с ролью Админ)
### Пользователи
###### GET  /api/v1/users - Получить всех пользователей.
###### GET  /api/v1/users/{id} - Получить пользователя по идентификатора.
###### POST  /api/v1/users - Создать пользователя. (Может только пользователь с ролью Админ)
###### PATCH  /api/v1/users/{id} - Изменить существующего пользователя. (Может только пользователь с ролью Админ)
###### DELETE  /api/v1/users/{id} - Удалить пользователя. (Может только пользователь с ролью Админ)


## Настройка и развертывание

###### У Вас должна быть запущена Kafka и Docker.
###### Клонируйте репозиторий проекта.
###### Установите все необходимые зависимости, указанные в файле pom.xml.
###### Укажите актуальные URL для каждой конечной точки в коде, где они используются.
###### Выполните команду docker-compose up в теминале, находясь в корневой папке сервиса.
###### Запустите сервис на вашем сервере или локальной машине.
###### Проверьте работоспособность сервиса, обращаясь к соответствующим url.
###### Зайти сможете по логину и паролю admin